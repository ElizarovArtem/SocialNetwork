(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[3],{295:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(37),r=n(38),o=n(40),l=n(39),u=n(0),s=n.n(u),i=n(10),c=n(14),p=function(e){return{isAuth:e.auth.isAuth}},m=function(e){var t=function(t){Object(o.a)(u,t);var n=Object(l.a)(u);function u(){return Object(a.a)(this,u),n.apply(this,arguments)}return Object(r.a)(u,[{key:"render",value:function(){return this.props.isAuth?s.a.createElement(e,this.props):s.a.createElement(i.a,{to:"/login"})}}]),u}(s.a.Component);return Object(c.b)(p)(t)}},296:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__wO8sV",contacts:"ProfileInfo_contacts__2di53"}},297:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__z_i38",posts:"MyPosts_posts__2mXUn",messageArea:"MyPosts_messageArea__abWOD",submitButton:"MyPosts_submitButton__Uxad4"}},298:function(e,t,n){e.exports={item:"Post_item__2tVNb"}},299:function(e,t,n){"use strict";n.r(t),n.d(t,"ProfileBigContainer",(function(){return F}));var a=n(37),r=n(38),o=n(40),l=n(39),u=n(0),s=n.n(u),i=n(99),c=n(296),p=n.n(c),m=n(43),f=n(103),d=n.n(f),h=function(e){var t=Object(u.useState)(!1),n=Object(i.a)(t,2),a=n[0],r=n[1],o=Object(u.useState)(e.status),l=Object(i.a)(o,2),c=l[0],p=l[1];Object(u.useEffect)((function(){p(e.status)}),[e.status]);return s.a.createElement("div",null,a?s.a.createElement("div",null,s.a.createElement("input",{type:"text",value:c,onChange:function(e){return p(e.currentTarget.value)},onBlur:function(){r(!1),e.updateStatusThunk(c)},autoFocus:!0})):s.a.createElement("div",null,s.a.createElement("b",null,"Status: "),s.a.createElement("span",{onDoubleClick:function(){p(e.status),r(!0)}},e.status||"-----")))},b=n(30),E=n(133),k=n(52),v=Object(E.a)({form:"profileData"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement("div",null,s.a.createElement("button",null,"Save")),e.error&&e.error,s.a.createElement("div",null,s.a.createElement("b",null,"Name:"),Object(b.c)("Enter new name",b.a,[k.b],"fullName")),s.a.createElement("div",null,s.a.createElement("b",null,"About me:")," ",Object(b.c)("Write about yourself",b.b,[k.b],"aboutMe")),s.a.createElement("div",null,s.a.createElement("b",null,"Working status:"),Object(b.c)("",b.a,[],"lookingForAJob",{type:"checkbox"})),s.a.createElement("div",null,s.a.createElement("b",null,"My professional skills: "),Object(b.c)("Write about your skills",b.b,[k.b],"lookingForAJobDescription")),s.a.createElement("div",null,s.a.createElement("b",null,"Contacts:"),s.a.createElement("div",{className:p.a.contacts},Object.keys(e.profile.contacts).map((function(e){return s.a.createElement("div",null,s.a.createElement("b",null,e,": "),Object(b.c)("Enter link",b.a,[],"contacts[".concat(e,"]")))})))))}));function O(e){var t=Object(u.useState)(!1),n=Object(i.a)(t,2),a=n[0],r=n[1];if(!e.profile)return s.a.createElement(m.a,null);return s.a.createElement("div",{className:p.a.content},s.a.createElement("div",null,s.a.createElement("img",{src:"https://mirgif.com/priroda/more41.jpg",width:"100%"})),s.a.createElement("div",{className:p.a.descriptionBlock},s.a.createElement("div",null,s.a.createElement("img",{src:e.profile.photos.large||d.a}),e.isOwner&&s.a.createElement("input",{type:"file",onChange:function(t){var n=t.target&&t.target.files&&t.target.files[0];null!==n&&e.updatePhotoThunk(n)}})),s.a.createElement(h,{error:e.error,status:e.status,updateStatusThunk:e.updateStatusThunk}),a?s.a.createElement(v,{initialValues:e.profile,onSubmit:function(t){var n=e.updateProfileThunk(t);Promise.all([n]).then((function(){r(!1)}))},profile:e.profile}):s.a.createElement(P,{isOwner:e.isOwner,onEdit:function(){return r(!0)},profile:e.profile})))}var P=function(e){return s.a.createElement("div",null,s.a.createElement("div",null,e.isOwner&&s.a.createElement("button",{onClick:e.onEdit},"Edit")),s.a.createElement("div",null,s.a.createElement("b",null,"Name:")," ",e.profile.fullName),s.a.createElement("div",null,s.a.createElement("b",null,"About me:")," ",e.profile.aboutMe),s.a.createElement("div",null,s.a.createElement("b",null,"Working status:")," ",e.profile.lookingForAJob?"Ready for new offers":"Working"),s.a.createElement("div",null,s.a.createElement("b",null,"My professional skills: "),e.profile.lookingForAJobDescription),s.a.createElement("div",null,s.a.createElement("b",null,"Contacts:"),s.a.createElement("div",{className:p.a.contacts},Object.keys(e.profile.contacts).map((function(t){return s.a.createElement(g,{key:t,contactName:t,contactDescription:e.profile.contacts[t]})})))))},g=function(e){return s.a.createElement("div",null,s.a.createElement("b",null,e.contactName,": "),s.a.createElement("span",null,e.contactDescription))},j=n(297),T=n.n(j),y=n(298),S=n.n(y);function _(e){return s.a.createElement("div",{className:S.a.item},s.a.createElement("img",{src:"https://img1.liveinternet.ru/images/attach/c/6/93/68/93068365_508790c345c65.jpg",alt:"avatar"}),e.message,s.a.createElement("div",null,s.a.createElement("span",null,"Likes: ",e.likesCount)))}var w=n(92),C=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return e!=this.props||t!=this.state}},{key:"render",value:function(){var e=this,t=this.props.posts.map((function(e){return s.a.createElement(_,{id:e.id,message:e.message,likesCount:e.likesCount})}));return s.a.createElement("div",{className:T.a.postsBlock},s.a.createElement("h3",null,"MY POSTS"),s.a.createElement(A,{onSubmit:function(t){e.props.addPost(t.mewPostText)}}),s.a.createElement("div",{className:T.a.posts},t))}}]),n}(s.a.Component),N=Object(k.a)(10),A=Object(E.a)({form:"newPost"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement(w.a,{className:T.a.messageArea,component:b.b,name:"mewPostText",placeholder:"Add new post",validate:[k.b,N]}),s.a.createElement("div",null,s.a.createElement("button",{className:T.a.submitButton},"Submit")))})),B=n(14),D=Object(B.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e({type:"ADD-POST",newPostText:t})}}}))(C);function U(e){return s.a.createElement("div",null,s.a.createElement(O,{error:e.error,updatePhotoThunk:e.updatePhotoThunk,updateProfileThunk:e.updateProfileThunk,isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatusThunk:e.updateStatusThunk}),s.a.createElement(D,null))}var M=n(132),x=n(10),I=n(295),J=n(8),W=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"openCorrectUserProfile",value:function(){var e=this.props.match.params.userId;e||(e=String(this.props.authorizedUserId))||this.props.history.push("/login"),this.props.setUserProfileThunk(e),this.props.setStatusThunk(e)}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userId!==e.match.params.userId&&this.openCorrectUserProfile()}},{key:"componentDidMount",value:function(){this.openCorrectUserProfile()}},{key:"render",value:function(){return s.a.createElement(U,{error:this.props.error,isOwner:!this.props.match.params.userId,updateProfileThunk:this.props.updateProfileThunk,profile:this.props.profile,status:this.props.status,updateStatusThunk:this.props.updateStatusThunk,updatePhotoThunk:this.props.updatePhotoThunk})}}]),n}(s.a.Component),F=Object(J.d)(Object(B.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.id,error:e.app.error}}),{updateProfileThunk:M.e,setUserProfileThunk:M.c,setStatusThunk:M.b,updateStatusThunk:M.f,updatePhotoThunk:M.d}),x.g,I.a)(W)}}]);
//# sourceMappingURL=3.5d906801.chunk.js.map